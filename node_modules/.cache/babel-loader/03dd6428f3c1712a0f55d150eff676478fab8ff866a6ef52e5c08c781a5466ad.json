{"ast":null,"code":"import React,{useState}from'react';import{Container,Box,Typography,Button,Paper,CircularProgress,Alert,Snackbar,useTheme,useMediaQuery}from'@mui/material';import{Google as GoogleIcon}from'@mui/icons-material';import{signInWithGoogle}from'../lib/firebase';import{useNavigate}from'react-router-dom';import{createOrUpdateUser}from'../lib/firebase';import{Timestamp}from'firebase/firestore';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export const COLLECTIONS={PERSONEL:'personel',HEDEF_NISBET:'hedef_nisbet',GUNLUK_ARTIS:'gunluk_artis',USERS:'users'};function LoginPage(){const[loading,setLoading]=useState(false);const[error,setError]=useState(null);const navigate=useNavigate();const theme=useTheme();const isMobile=useMediaQuery(theme.breakpoints.down('sm'));const handleGoogleSignIn=async()=>{try{setLoading(true);setError(null);const result=await signInWithGoogle();if(result.user){// Kullanıcı bilgilerini Firestore'a kaydet\nawait createOrUpdateUser({uid:result.user.uid,email:result.user.email||'',displayName:result.user.displayName||'',photoURL:result.user.photoURL||'',lastLogin:Timestamp.now()});console.log('Giriş başarılı:',result.user);navigate('/');}}catch(error){console.error('Giriş hatası:',error);if(error.code==='auth/unauthorized-domain'){setError('Bu domain için giriş yetkisi yok. Lütfen yönetici ile iletişime geçin.');}else if(error.code==='auth/popup-closed-by-user'){setError('Giriş penceresi kapatıldı. Lütfen tekrar deneyin.');}else{setError('Giriş yapılırken bir hata oluştu. Lütfen tekrar deneyin.');}}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(Container,{maxWidth:\"sm\",children:[/*#__PURE__*/_jsx(Box,{sx:{minHeight:'100vh',display:'flex',flexDirection:'column',justifyContent:'center',alignItems:'center',py:4},children:/*#__PURE__*/_jsx(Paper,{elevation:3,sx:{p:{xs:3,sm:4},width:'100%',borderRadius:2,backgroundColor:'background.paper',boxShadow:'0 8px 32px rgba(0,0,0,0.1)'},children:/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',flexDirection:'column',alignItems:'center',gap:3},children:[/*#__PURE__*/_jsx(Box,{sx:{width:80,height:80,borderRadius:'50%',backgroundColor:'primary.main',display:'flex',alignItems:'center',justifyContent:'center',mb:2},children:/*#__PURE__*/_jsx(Typography,{variant:\"h4\",color:\"white\",children:\"VCB\"})}),/*#__PURE__*/_jsx(Typography,{variant:\"h4\",component:\"h1\",gutterBottom:true,sx:{fontWeight:600,textAlign:'center',color:'text.primary'},children:\"Ho\\u015F Geldiniz\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body1\",color:\"text.secondary\",sx:{textAlign:'center',mb:3},children:\"Devam etmek i\\xE7in Google hesab\\u0131n\\u0131zla giri\\u015F yap\\u0131n\"}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",onClick:handleGoogleSignIn,disabled:loading,startIcon:loading?/*#__PURE__*/_jsx(CircularProgress,{size:20,color:\"inherit\"}):/*#__PURE__*/_jsx(GoogleIcon,{}),sx:{width:'100%',py:1.5,backgroundColor:'white',color:'text.primary',border:'1px solid',borderColor:'divider','&:hover':{backgroundColor:'grey.100'}},children:loading?'Giriş Yapılıyor...':'Google ile Giriş Yap'}),/*#__PURE__*/_jsx(Typography,{variant:\"caption\",color:\"text.secondary\",sx:{textAlign:'center',mt:2},children:\"Giri\\u015F yaparak kullan\\u0131m ko\\u015Fullar\\u0131n\\u0131 kabul etmi\\u015F olursunuz\"})]})})}),/*#__PURE__*/_jsx(Snackbar,{open:!!error,autoHideDuration:6000,onClose:()=>setError(null),anchorOrigin:{vertical:'bottom',horizontal:'center'},children:/*#__PURE__*/_jsx(Alert,{onClose:()=>setError(null),severity:\"error\",variant:\"filled\",sx:{width:'100%'},children:error})})]});}export default LoginPage;","map":{"version":3,"names":["React","useState","Container","Box","Typography","Button","Paper","CircularProgress","Alert","Snackbar","useTheme","useMediaQuery","Google","GoogleIcon","signInWithGoogle","useNavigate","createOrUpdateUser","Timestamp","jsx","_jsx","jsxs","_jsxs","COLLECTIONS","PERSONEL","HEDEF_NISBET","GUNLUK_ARTIS","USERS","LoginPage","loading","setLoading","error","setError","navigate","theme","isMobile","breakpoints","down","handleGoogleSignIn","result","user","uid","email","displayName","photoURL","lastLogin","now","console","log","code","maxWidth","children","sx","minHeight","display","flexDirection","justifyContent","alignItems","py","elevation","p","xs","sm","width","borderRadius","backgroundColor","boxShadow","gap","height","mb","variant","color","component","gutterBottom","fontWeight","textAlign","onClick","disabled","startIcon","size","border","borderColor","mt","open","autoHideDuration","onClose","anchorOrigin","vertical","horizontal","severity"],"sources":["C:/Users/ibrahim.alisan/2025 vcb sonLogindenOnce/2025 vcb son/src/components/LoginPage.tsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { \r\n  Container, \r\n  Box, \r\n  Typography, \r\n  Button, \r\n  Paper, \r\n  CircularProgress,\r\n  Alert,\r\n  Snackbar,\r\n  useTheme,\r\n  useMediaQuery\r\n} from '@mui/material';\r\nimport { Google as GoogleIcon } from '@mui/icons-material';\r\nimport { signInWithGoogle } from '../lib/firebase';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { createOrUpdateUser } from '../lib/firebase';\r\nimport { Timestamp } from 'firebase/firestore';\r\n\r\nexport const COLLECTIONS = {\r\n  PERSONEL: 'personel',\r\n  HEDEF_NISBET: 'hedef_nisbet',\r\n  GUNLUK_ARTIS: 'gunluk_artis',\r\n  USERS: 'users'\r\n} as const;\r\n\r\nfunction LoginPage() {\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const navigate = useNavigate();\r\n  const theme = useTheme();\r\n  const isMobile = useMediaQuery(theme.breakpoints.down('sm'));\r\n\r\n  const handleGoogleSignIn = async () => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n      const result = await signInWithGoogle();\r\n      \r\n      if (result.user) {\r\n        // Kullanıcı bilgilerini Firestore'a kaydet\r\n        await createOrUpdateUser({\r\n          uid: result.user.uid,\r\n          email: result.user.email || '',\r\n          displayName: result.user.displayName || '',\r\n          photoURL: result.user.photoURL || '',\r\n          lastLogin: Timestamp.now()\r\n        });\r\n\r\n        console.log('Giriş başarılı:', result.user);\r\n        navigate('/');\r\n      }\r\n    } catch (error: any) {\r\n      console.error('Giriş hatası:', error);\r\n      if (error.code === 'auth/unauthorized-domain') {\r\n        setError('Bu domain için giriş yetkisi yok. Lütfen yönetici ile iletişime geçin.');\r\n      } else if (error.code === 'auth/popup-closed-by-user') {\r\n        setError('Giriş penceresi kapatıldı. Lütfen tekrar deneyin.');\r\n      } else {\r\n        setError('Giriş yapılırken bir hata oluştu. Lütfen tekrar deneyin.');\r\n      }\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Container maxWidth=\"sm\">\r\n      <Box\r\n        sx={{\r\n          minHeight: '100vh',\r\n          display: 'flex',\r\n          flexDirection: 'column',\r\n          justifyContent: 'center',\r\n          alignItems: 'center',\r\n          py: 4\r\n        }}\r\n      >\r\n        <Paper\r\n          elevation={3}\r\n          sx={{\r\n            p: { xs: 3, sm: 4 },\r\n            width: '100%',\r\n            borderRadius: 2,\r\n            backgroundColor: 'background.paper',\r\n            boxShadow: '0 8px 32px rgba(0,0,0,0.1)'\r\n          }}\r\n        >\r\n          <Box\r\n            sx={{\r\n              display: 'flex',\r\n              flexDirection: 'column',\r\n              alignItems: 'center',\r\n              gap: 3\r\n            }}\r\n          >\r\n            {/* Logo veya Başlık */}\r\n            <Box\r\n              sx={{\r\n                width: 80,\r\n                height: 80,\r\n                borderRadius: '50%',\r\n                backgroundColor: 'primary.main',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                justifyContent: 'center',\r\n                mb: 2\r\n              }}\r\n            >\r\n              <Typography variant=\"h4\" color=\"white\">\r\n                VCB\r\n              </Typography>\r\n            </Box>\r\n\r\n            <Typography \r\n              variant=\"h4\" \r\n              component=\"h1\" \r\n              gutterBottom\r\n              sx={{\r\n                fontWeight: 600,\r\n                textAlign: 'center',\r\n                color: 'text.primary'\r\n              }}\r\n            >\r\n              Hoş Geldiniz\r\n            </Typography>\r\n\r\n            <Typography \r\n              variant=\"body1\" \r\n              color=\"text.secondary\"\r\n              sx={{ \r\n                textAlign: 'center',\r\n                mb: 3\r\n              }}\r\n            >\r\n              Devam etmek için Google hesabınızla giriş yapın\r\n            </Typography>\r\n\r\n            <Button\r\n              variant=\"contained\"\r\n              onClick={handleGoogleSignIn}\r\n              disabled={loading}\r\n              startIcon={loading ? <CircularProgress size={20} color=\"inherit\" /> : <GoogleIcon />}\r\n              sx={{\r\n                width: '100%',\r\n                py: 1.5,\r\n                backgroundColor: 'white',\r\n                color: 'text.primary',\r\n                border: '1px solid',\r\n                borderColor: 'divider',\r\n                '&:hover': {\r\n                  backgroundColor: 'grey.100'\r\n                }\r\n              }}\r\n            >\r\n              {loading ? 'Giriş Yapılıyor...' : 'Google ile Giriş Yap'}\r\n            </Button>\r\n\r\n            <Typography \r\n              variant=\"caption\" \r\n              color=\"text.secondary\"\r\n              sx={{ \r\n                textAlign: 'center',\r\n                mt: 2\r\n              }}\r\n            >\r\n              Giriş yaparak kullanım koşullarını kabul etmiş olursunuz\r\n            </Typography>\r\n          </Box>\r\n        </Paper>\r\n      </Box>\r\n\r\n      <Snackbar \r\n        open={!!error} \r\n        autoHideDuration={6000} \r\n        onClose={() => setError(null)}\r\n        anchorOrigin={{ vertical: 'bottom', horizontal: 'center' }}\r\n      >\r\n        <Alert \r\n          onClose={() => setError(null)} \r\n          severity=\"error\" \r\n          variant=\"filled\"\r\n          sx={{ width: '100%' }}\r\n        >\r\n          {error}\r\n        </Alert>\r\n      </Snackbar>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default LoginPage; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}